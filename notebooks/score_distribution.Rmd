---
jupyter:
  jupytext:
    text_representation:
      extension: .Rmd
      format_name: rmarkdown
      format_version: '1.2'
      jupytext_version: 1.11.4
  kernelspec:
    display_name: Python 3
    language: python
    name: python3
---

```{python}
import pandas as pd
import json
import os
from glob import glob
```

```{python}
# !ls ..
```

```{python}
output_path = os.path.join('..', 'output')
```

```{python}
os.path.join(output_path, '*.jsonl')
```

```{python}
bi_scores = glob(os.path.join(output_path, '*_bi.jsonl'))
bi_scores
```

```{python}
cross_scores = glob(os.path.join(output_path, '*_cross.jsonl'))
cross_scores
```

```{python}
bi_df = pd.DataFrame()
for score_file in bi_scores:
    bi_df = pd.concat([bi_df, pd.read_json(score_file)])
bi_df
```

```{python}
for score_file in bi_scores:
    print(score_file)
    with open(score_file, 'r') as fd:
        js = json.load(fd)
    break
len(js['labels'])
```

```{python}

```

```{python}
with open('../output/clueweb_questions_scores_cross.jsonl', 'r') as fd:
    js = json.load(fd)
```

```{python}
js.keys()
```

```{python}
len(js['nns'])
```

```{python}
len(js['unsorted_scores'][1])
```

```{python}
pd.read_json('../output/clueweb_questions_scores_cross.jsonl')
```

```{python}
cross_df = pd.DataFrame()
for score_file in cross_scores:
    print(score_file)
    #cross_df = pd.concat([cross_df, pd.read_json(score_file)])
    with open(score_file, 'r') as fd:
        js = json.load(fd)
    for key in js.keys():
        print(key, len(js[key]))
#cross_df
```

```{python}
# !cat '../output/ace2004_questions_scores_bi.jsonl'
```
